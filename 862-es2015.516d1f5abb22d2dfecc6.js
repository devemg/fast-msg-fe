(self.webpackChunkfast_msg_fe=self.webpackChunkfast_msg_fe||[]).push([[862],{86862:function(t,e,n){"use strict";n.r(e),n.d(e,{MessagesModule:function(){return et}});var o=n(61116),i=n(31041),a=n(68494),c=n(59571),r=n(17569),s=n(35366),l=n(76484);let g=(()=>{class t{constructor(t){this.localService=t}getProfile(){return new Promise((t,e)=>{t(this.localService.getUserProfile())})}updateProfile(t){return new Promise((e,n)=>{this.localService.updateProfile(t),e({})})}updatePassword(t){return new Promise((e,n)=>{this.localService.updatePassword(t),e({})})}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(l.n))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var d=n(63589),m=n(22797),u=n(84369),p=n(24311),h=n(77307),f=n(13070),C=n(9550);function _(t,e){1&t&&(s.TgZ(0,"mat-error"),s._uU(1,"El correo el\xe9ctronico es requerido"),s.qZA())}function Z(t,e){1&t&&(s.TgZ(0,"mat-error"),s._uU(1,"El correo el\xe9ctronico es inv\xe1lido"),s.qZA())}function P(t,e){1&t&&(s.TgZ(0,"button",15),s._uU(1,"Actualizar Perfil"),s.qZA())}function M(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"form",6),s.NdJ("ngSubmit",function(){return s.CHM(t),s.oxw().submitPassword()}),s.TgZ(1,"h2"),s._uU(2,"Actualizar Contrase\xf1a"),s.qZA(),s.TgZ(3,"mat-form-field",9),s.TgZ(4,"mat-label"),s._uU(5,"Contrase\xf1a"),s.qZA(),s._UZ(6,"input",16),s.TgZ(7,"mat-error"),s._uU(8,"La contrase\xf1a es requerida"),s.qZA(),s.qZA(),s.TgZ(9,"mat-form-field",9),s.TgZ(10,"mat-label"),s._uU(11,"Nueva Contrase\xf1a"),s.qZA(),s._UZ(12,"input",17),s.TgZ(13,"mat-error"),s._uU(14,"La nueva contrase\xf1a es requerida"),s.qZA(),s.qZA(),s.TgZ(15,"button",15),s._uU(16,"Actualizar Contrase\xf1a"),s.qZA(),s.qZA()}if(2&t){const t=s.oxw();s.Q6J("formGroup",t.passwordForm)}}let b=(()=>{class t{constructor(t,e,n){this.userService=t,this.formBuilder=e,this.matSnackBar=n,this.canUpdatePassword=!1,this.canUpdateProfile=!1,this.ProfileImage="",this.profileForm=this.formBuilder.group({name:["",i.kI.required],email:["",[i.kI.required,i.kI.email]]}),this.passwordForm=this.formBuilder.group({password:["",i.kI.required],newPassword:["",i.kI.required]})}ngOnInit(){this.userService.getProfile().then(t=>{this.profileForm.patchValue(t),this.ProfileImage=t.image}).catch(t=>console.log(t))}toggleUpdate(t){1==t?(this.canUpdateProfile=!this.canUpdateProfile,this.canUpdatePassword=!1):(this.canUpdatePassword=!this.canUpdatePassword,this.canUpdateProfile=!1)}submitProfile(){this.profileForm.valid&&(this.userService.updateProfile(this.profileForm.value).then(t=>{this.matSnackBar.open("Perfil Actualizado","Ok",{duration:2e3})}).catch(t=>console.log(t)),this.canUpdateProfile=!1)}submitPassword(){this.passwordForm.valid&&(this.userService.updatePassword(this.passwordForm.value).then(()=>{this.matSnackBar.open("Contrase\xf1a Actualizada","Ok",{duration:2e3})}).catch(t=>console.log(t)),this.canUpdatePassword=!1,this.passwordForm.reset())}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(g),s.Y36(i.qu),s.Y36(d.ux))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-account"]],decls:34,vars:8,consts:[[1,"container-all"],[1,"content-profile"],[1,"options"],["mat-icon-button","","color","accent","matTooltip","Actualizar Perfil","matTooltipPosition","right",3,"click"],["mat-icon-button","","color","accent","matTooltip","Actualizar Contrase\xf1a","matTooltipPosition","right",3,"click"],[1,"container-form"],[3,"formGroup","ngSubmit"],[1,"image"],["alt","profile",3,"src"],["appearance","outline"],["type","text","matInput","","placeholder","Nombre","required","","formControlName","name",3,"readonly"],["type","email","matInput","","placeholder","email@email.com","required","","formControlName","email",3,"readonly"],[4,"ngIf"],["class","full-width","type","submit","mat-flat-button","","color","primary",4,"ngIf"],[3,"formGroup","ngSubmit",4,"ngIf"],["type","submit","mat-flat-button","","color","primary",1,"full-width"],["type","password","matInput","","placeholder","Contrase\xf1a","formControlName","password"],["type","password","matInput","","placeholder","Contrase\xf1a","formControlName","newPassword"]],template:function(t,e){1&t&&(s.TgZ(0,"div",0),s.TgZ(1,"mat-card"),s.TgZ(2,"mat-card-title"),s.TgZ(3,"h1"),s._uU(4,"Mi Cuenta"),s.qZA(),s.qZA(),s.TgZ(5,"mat-card-content"),s.TgZ(6,"div",1),s.TgZ(7,"div",2),s.TgZ(8,"button",3),s.NdJ("click",function(){return e.toggleUpdate(1)}),s.TgZ(9,"mat-icon"),s._uU(10,"drive_file_rename_outline"),s.qZA(),s.qZA(),s.TgZ(11,"button",4),s.NdJ("click",function(){return e.toggleUpdate(2)}),s.TgZ(12,"mat-icon"),s._uU(13,"vpn_key"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(14,"div",5),s.TgZ(15,"form",6),s.NdJ("ngSubmit",function(){return e.submitProfile()}),s.TgZ(16,"h2"),s._uU(17,"Mi Perfil"),s.qZA(),s.TgZ(18,"div",7),s._UZ(19,"img",8),s.qZA(),s.TgZ(20,"mat-form-field",9),s.TgZ(21,"mat-label"),s._uU(22,"Nombre"),s.qZA(),s._UZ(23,"input",10),s.TgZ(24,"mat-error"),s._uU(25,"El nombre es requerido"),s.qZA(),s.qZA(),s.TgZ(26,"mat-form-field",9),s.TgZ(27,"mat-label"),s._uU(28,"Correo el\xe9ctronico"),s.qZA(),s._UZ(29,"input",11),s.YNc(30,_,2,0,"mat-error",12),s.YNc(31,Z,2,0,"mat-error",12),s.qZA(),s.YNc(32,P,2,0,"button",13),s.qZA(),s.YNc(33,M,17,1,"form",14),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&t&&(s.xp6(15),s.Q6J("formGroup",e.profileForm),s.xp6(4),s.Q6J("src",e.ProfileImage,s.LSH),s.xp6(4),s.Q6J("readonly",!e.canUpdateProfile),s.xp6(6),s.Q6J("readonly",!e.canUpdateProfile),s.xp6(1),s.Q6J("ngIf",e.profileForm.controls.email.touched&&e.profileForm.controls.email.hasError("required")),s.xp6(1),s.Q6J("ngIf",e.profileForm.controls.email.touched&&e.profileForm.controls.email.hasError("email")),s.xp6(1),s.Q6J("ngIf",e.canUpdateProfile),s.xp6(1),s.Q6J("ngIf",e.canUpdatePassword))},directives:[m.a8,m.n5,m.dn,u.lW,p.gM,h.Hw,i._Y,i.JL,i.sg,f.KE,f.hX,C.Nt,i.Fj,i.Q7,i.JJ,i.u,f.TO,o.O5],styles:[".container-all[_ngcontent-%COMP%]{width:100%;padding-top:2em}.container-all[_ngcontent-%COMP%], .image[_ngcontent-%COMP%]{display:flex;justify-content:center}.image[_ngcontent-%COMP%]{padding:.5em 0}.image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:100%;border:5px solid #ee9b00}.content-profile[_ngcontent-%COMP%]{display:flex}.content-profile[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]{border-right:1px solid rgba(0,0,0,.185);padding:.5em;margin:.5em;border-radius:3px;display:flex;flex-direction:column}mat-card[_ngcontent-%COMP%]{width:80%}mat-card[_ngcontent-%COMP%]   .container-form[_ngcontent-%COMP%], mat-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%}mat-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%;padding-bottom:5px}mat-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]{padding-top:.5em;padding-bottom:.5em}@media screen and (max-width:500px){.content-profile[_ngcontent-%COMP%]{flex-direction:column}.content-profile[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]{border-right:none;border-bottom:1px solid rgba(0,0,0,.185);flex-direction:row}}"]}),t})();var O=n(55959),v=n(83210);let w=(()=>{class t{constructor(){}getContacts(t){let e=[];for(let n=0;n<t;n++)e.push({_id:v.datatype.uuid(),image:v.image.avatar(),name:v.name.findName(),email:v.internet.email()});return e}getUser(){return{_id:v.datatype.uuid(),image:v.image.avatar(),name:v.name.findName(),email:v.internet.email()}}getChatList(t){let e=[];for(let n=0;n<t;n++)e.push({id:v.datatype.uuid(),image:v.image.avatar(),title:v.name.findName(),lastMessage:v.lorem.sentence(),contactId:v.datatype.uuid()});return e}getChat(){return{id:v.datatype.uuid(),image:v.image.avatar(),title:v.name.findName(),contactId:v.datatype.uuid(),messages:[]}}getRandomMessages(t){let e=[];for(let n=0;n<t;n++)e.push({id:v.datatype.uuid(),content:v.lorem.sentence(),date:v.datatype.datetime(),isOwn:v.datatype.boolean()});return e}getRandomNumber(){return v.datatype.number({min:10,max:25})}getId(){return v.datatype.uuid()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),x=(()=>{class t{constructor(t,e){this.randomService=t,this.localService=e,this.subject=new O.xQ}changeChat(t){this.subject.next(t)}getChatObservable(){return this.subject.asObservable()}getCommunity(){return new Promise((t,e)=>{t(this.randomService.getContacts(10))})}addContact(t){return new Promise((e,n)=>{this.localService.addContact(t),e({})})}removeContact(t){return new Promise((e,n)=>{this.localService.removeContact(t),e({})})}getContactsFromUser(){return new Promise((t,e)=>{t(this.localService.getContacts())})}getChatList(){return new Promise((t,e)=>{t(this.localService.getChatList().concat(this.randomService.getChatList(5)))})}getChat(t){return new Promise((t,e)=>{t(this.randomService.getChat())})}getChatMessages(t){return new Promise((t,e)=>{t(this.randomService.getRandomMessages(this.randomService.getRandomNumber()))})}createChat(t){let e=this.localService.getChatList().find(e=>e.contactId==t._id);if(e)this.subject.next(e);else{let e={id:this.randomService.getId(),title:t.name,image:t.image,contactId:t._id};this.localService.addChat(e),this.subject.next(e)}}removeChat(t){return new Promise((e,n)=>{this.localService.removeChat(t),e({})})}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(w),s.LFG(l.n))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function q(t,e){if(1&t&&(s.TgZ(0,"p"),s._uU(1),s.qZA()),2&t){const t=s.oxw().$implicit;s.xp6(1),s.Oqu(t.email)}}function T(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"button",7),s.NdJ("click",function(){s.CHM(t);const e=s.oxw().$implicit;return s.oxw().addContact(e)}),s.TgZ(1,"mat-icon"),s._uU(2,"person_add"),s.qZA(),s.qZA()}}function A(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"button",7),s.NdJ("click",function(){s.CHM(t);const e=s.oxw().$implicit;return s.oxw().removeContact(e._id)}),s.TgZ(1,"mat-icon"),s._uU(2,"person_remove"),s.qZA(),s.qZA()}}function y(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"button",7),s.NdJ("click",function(){s.CHM(t);const e=s.oxw().$implicit;return s.oxw().createChat(e)}),s.TgZ(1,"mat-icon"),s._uU(2,"message"),s.qZA(),s.qZA()}}function k(t,e){if(1&t&&(s.TgZ(0,"mat-card",3),s._UZ(1,"img",4),s.TgZ(2,"h3"),s._uU(3),s.qZA(),s.YNc(4,q,2,1,"p",5),s.TgZ(5,"div"),s.YNc(6,T,3,0,"button",6),s.YNc(7,A,3,0,"button",6),s.YNc(8,y,3,0,"button",6),s.qZA(),s.qZA()),2&t){const t=e.$implicit,n=s.oxw();s.xp6(1),s.Q6J("src",t.image,s.LSH),s.xp6(2),s.Oqu(t.name),s.xp6(1),s.Q6J("ngIf",t.email),s.xp6(2),s.Q6J("ngIf",!n.isContacts),s.xp6(1),s.Q6J("ngIf",n.isContacts),s.xp6(1),s.Q6J("ngIf",n.isContacts)}}let U=(()=>{class t{constructor(t,e,n,o,i){this.contactService=t,this.snackBar=e,this.activatedRoute=n,this.randomService=o,this.router=i,this.contactList=[],this.isContacts=!1}ngOnInit(){(this.activatedRoute.snapshot.url.length>0?this.activatedRoute.snapshot.url[0].path:"community").includes("community")?(this.isContacts=!1,this.loadCommunity()):(this.isContacts=!0,this.getContactsFromUser())}loadCommunity(){this.contactService.getCommunity().then(t=>{this.contactList=t}).catch(t=>console.log(t))}addContact(t){this.contactService.addContact(t).then(t=>{this.snackBar.open("Contacto Agregado","Ok",{duration:3e3}),this.router.navigate(["../contacts"],{relativeTo:this.activatedRoute})}).catch(t=>console.log(t))}removeContact(t){let e=this.contactList.findIndex(e=>e._id==t);e>-1&&this.contactList.splice(e,1),this.snackBar.open("Contacto Eliminado","Ok",{duration:3e3})}getContactsFromUser(){this.contactService.getContactsFromUser().then(t=>{this.contactList=t}).catch(t=>{this.contactList=[],console.log(t)})}createChat(t){this.contactService.createChat(t),this.router.navigate(["../chat"],{relativeTo:this.activatedRoute})}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(x),s.Y36(d.ux),s.Y36(r.gz),s.Y36(w),s.Y36(r.F0))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-community"]],decls:5,vars:2,consts:[[1,"content"],[1,"grid"],["class","contact",4,"ngFor","ngForOf"],[1,"contact"],["alt","contact",3,"src"],[4,"ngIf"],["mat-icon-button","","color","primary",3,"click",4,"ngIf"],["mat-icon-button","","color","primary",3,"click"]],template:function(t,e){1&t&&(s.TgZ(0,"div",0),s.TgZ(1,"h1"),s._uU(2),s.qZA(),s.TgZ(3,"div",1),s.YNc(4,k,9,6,"mat-card",2),s.qZA(),s.qZA()),2&t&&(s.xp6(2),s.Oqu(e.isContacts?"Contactos":"Comunidad"),s.xp6(2),s.Q6J("ngForOf",e.contactList))},directives:[o.sg,m.a8,o.O5,u.lW,h.Hw],styles:[".content[_ngcontent-%COMP%]{padding:2em}.grid[_ngcontent-%COMP%]{display:grid;grid-gap:2em;grid-template-columns:repeat(5,1fr)}.grid[_ngcontent-%COMP%]   .contact[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-direction:column;align-items:center}.grid[_ngcontent-%COMP%]   .contact[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-weight:700}.grid[_ngcontent-%COMP%]   .contact[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{overflow-wrap:break-word}.grid[_ngcontent-%COMP%]   .contact[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50%;border-radius:100%;border:5px solid #ee9b00}@media screen and (max-width:1335px){.grid[_ngcontent-%COMP%]{grid-template-columns:repeat(4,1fr)}}@media screen and (max-width:1006px){.grid[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}@media screen and (max-width:883px){.grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media screen and (max-width:610px){.grid[_ngcontent-%COMP%]{display:flex;flex-direction:column}}"]}),t})();const S=[{title:"Comunidad",icon:"public",route:"./community"},{title:"Contactos",icon:"contacts",route:"./contacts"},{title:"Chats",icon:"chat",route:"./chat"},{title:"Cuenta",icon:"settings",route:"./account"}];var J=n(42590),I=n(10168),N=n(37112),F=n(87064);function Q(t,e){if(1&t&&(s.TgZ(0,"div",7),s.TgZ(1,"button",9),s.TgZ(2,"mat-icon",1),s._uU(3),s.qZA(),s.qZA(),s.qZA()),2&t){const t=e.$implicit;s.xp6(1),s.Q6J("matTooltip",t.title)("routerLink",t.route),s.xp6(2),s.Oqu(t.icon)}}let Y=(()=>{class t{constructor(t,e){this.authService=t,this.router=e,this.options=S}ngOnInit(){}logout(){this.authService.logout(),this.router.navigate([""])}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(J.e),s.Y36(r.F0))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-home"]],decls:14,vars:1,consts:[[1,"sidenav-container",3,"backdropClick"],["color","primary"],["mat-icon-button","","aria-label","icon-button with menu icon",3,"click"],["disableClose","","mode","side","opened","",1,"sidenav",3,"keydown.escape"],["sidenav",""],[1,"options"],["class","option",4,"ngFor","ngForOf"],[1,"option"],["matTooltip","Salir","matTooltipPosition","right","matRipple","",3,"click"],["matTooltipPosition","right","matRipple","",3,"matTooltip","routerLink"]],template:function(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"mat-sidenav-container",0),s.NdJ("backdropClick",function(){return s.CHM(t),s.MAs(6).toggle()}),s.TgZ(1,"mat-toolbar",1),s.TgZ(2,"button",2),s.NdJ("click",function(){return s.CHM(t),s.MAs(6).toggle()}),s.TgZ(3,"mat-icon"),s._uU(4,"menu"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(5,"mat-sidenav",3,4),s.NdJ("keydown.escape",function(){return s.CHM(t),s.MAs(6).toggle()}),s.TgZ(7,"div",5),s.YNc(8,Q,4,3,"div",6),s.TgZ(9,"div",7),s.TgZ(10,"button",8),s.NdJ("click",function(){return e.logout()}),s.TgZ(11,"mat-icon",1),s._uU(12,"door_front"),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s._UZ(13,"router-outlet"),s.qZA()}2&t&&(s.xp6(8),s.Q6J("ngForOf",e.options))},directives:[I.TM,N.Ye,u.lW,h.Hw,I.JX,o.sg,p.gM,F.wG,r.lC,r.rH],styles:[".sidenav-container[_ngcontent-%COMP%]{min-height:100vh;background-image:url(/assets/img/backgrounds/square_bg.png);color:#fff}.sidenav[_ngcontent-%COMP%], .sidenav-container[_ngcontent-%COMP%]{height:100%;background-color:#2f2f2f}.sidenav[_ngcontent-%COMP%]{width:auto}.sidenav-content[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:row;flex-wrap:nowrap}mat-toolbar[_ngcontent-%COMP%]{display:none}.options[_ngcontent-%COMP%]{width:auto}.options[_ngcontent-%COMP%]   .option[_ngcontent-%COMP%]{padding:.5em}.options[_ngcontent-%COMP%]   .option[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:100%;box-shadow:none;border:none;display:flex;justify-content:center;align-items:center;padding:1em;background-color:transparent}.options[_ngcontent-%COMP%]   .option[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{cursor:pointer}.options[_ngcontent-%COMP%]   .option[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover   mat-icon[_ngcontent-%COMP%]{color:#fff}.options[_ngcontent-%COMP%]   .option[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:40px;width:40px;height:40px}.container-all[_ngcontent-%COMP%], .content-menu[_ngcontent-%COMP%]{background-color:transparent}.container-all[_ngcontent-%COMP%]{width:100%;height:100%}.menu[_ngcontent-%COMP%]{background-color:transparent}.top-menu[_ngcontent-%COMP%]{background-color:#fff}@media screen and (max-width:425px){mat-toolbar[_ngcontent-%COMP%]{display:none}}"]}),t})();var L=n(25416),H=n(90667);function j(t,e){if(1&t&&(s.TgZ(0,"div",8),s._uU(1),s.qZA()),2&t){const t=s.oxw().$implicit;s.xp6(1),s.hij(" ",t.lastMessage," ")}}function E(t,e){if(1&t&&(s.TgZ(0,"mat-list-option",4),s._UZ(1,"img",5),s.TgZ(2,"div",6),s._uU(3),s.qZA(),s.YNc(4,j,2,1,"div",7),s.qZA()),2&t){const t=e.$implicit;s.Q6J("value",t.id),s.xp6(1),s.Q6J("src",t.image,s.LSH),s.xp6(2),s.Oqu(t.title),s.xp6(1),s.Q6J("ngIf",t.lastMessage)}}let z=(()=>{class t{constructor(t){this.messageService=t,this.chatList=[]}ngOnInit(){}ngAfterViewInit(){this.loadList()}loadList(){this.messageService.getChatList().then(t=>{this.chatList=t}).catch(t=>console.log(t))}selectChat(t){const e=t.options[0].value;let n=this.chatList.find(t=>t.id==e);n&&this.messageService.changeChat(n)}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(x))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-contact-chat-list"]],decls:5,vars:2,consts:[[1,"container-list"],[3,"multiple","selectionChange"],["mat-subheader",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["mat-list-icon","","alt","image",3,"src"],["mat-line","",1,"name"],["mat-line","","class","message",4,"ngIf"],["mat-line","",1,"message"]],template:function(t,e){1&t&&(s.TgZ(0,"div",0),s.TgZ(1,"mat-selection-list",1),s.NdJ("selectionChange",function(t){return e.selectChat(t)}),s.TgZ(2,"div",2),s._uU(3,"Conversaciones"),s.qZA(),s.YNc(4,E,5,4,"mat-list-option",3),s.qZA(),s.qZA()),2&t&&(s.xp6(1),s.Q6J("multiple",!1),s.xp6(3),s.Q6J("ngForOf",e.chatList))},directives:[H.Ub,H.gs,o.sg,H.vS,H.Nh,F.X2,o.O5],styles:[".container-list[_ngcontent-%COMP%]{width:100%;height:100%;overflow-y:auto;overflow-x:hidden;background-color:#2f2f2f}.mat-list-base[_ngcontent-%COMP%]   .mat-list-option[_ngcontent-%COMP%], .mat-list-base[_ngcontent-%COMP%]   .mat-subheader[_ngcontent-%COMP%]{color:#f3f3f3}.mat-list-base[_ngcontent-%COMP%]   .mat-subheader[_ngcontent-%COMP%]{font-family:Oswald,sans-serif;letter-spacing:1px}.name[_ngcontent-%COMP%]{font-weight:400!important}.message[_ngcontent-%COMP%]{font-weight:lighter!important}.mat-list-base[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]   .mat-list-icon[_ngcontent-%COMP%], .mat-list-base[_ngcontent-%COMP%]   .mat-list-option[_ngcontent-%COMP%]   .mat-list-icon[_ngcontent-%COMP%]{width:40px;height:40px}.mat-list-single-selected-option[_ngcontent-%COMP%]   .mat-list-icon[_ngcontent-%COMP%]{border:3px solid #ee9b00;padding:0}[_ngcontent-%COMP%]::-webkit-scrollbar{width:10px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#888}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#555}"]}),t})();var B=n(20400);const R=["scrollMe"];function $(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"mat-toolbar",4),s.TgZ(1,"div",5),s._UZ(2,"img",6),s.TgZ(3,"div"),s._uU(4),s.qZA(),s.qZA(),s._UZ(5,"span",7),s.TgZ(6,"button",8),s.TgZ(7,"mat-icon"),s._uU(8,"more_vert"),s.qZA(),s.qZA(),s.TgZ(9,"mat-menu",null,9),s.TgZ(11,"button",10),s.NdJ("click",function(){return s.CHM(t),s.oxw().deleteChat()}),s.TgZ(12,"mat-icon"),s._uU(13,"delete_outline"),s.qZA(),s.TgZ(14,"span"),s._uU(15,"Eliminar Conversaci\xf3n"),s.qZA(),s.qZA(),s.TgZ(16,"button",11),s.NdJ("click",function(){return s.CHM(t),s.oxw().clearMessages()}),s.TgZ(17,"mat-icon"),s._uU(18,"clear_all"),s.qZA(),s.TgZ(19,"span"),s._uU(20,"Eliminar Mensajes"),s.qZA(),s.qZA(),s.qZA(),s.qZA()}if(2&t){const t=s.MAs(10),e=s.oxw();s.xp6(2),s.Q6J("src",e.chat.image,s.LSH),s.xp6(2),s.Oqu(e.chat.title),s.xp6(2),s.Q6J("matMenuTriggerFor",t)}}const G=function(t){return{"send-message":t}};function X(t,e){if(1&t&&(s.TgZ(0,"div",15),s.TgZ(1,"div",16),s.TgZ(2,"p"),s._uU(3),s.qZA(),s.TgZ(4,"span"),s._uU(5),s.ALo(6,"date"),s.qZA(),s.qZA(),s.qZA()),2&t){const t=e.$implicit;s.Q6J("ngClass",s.VKq(6,G,t.isOwn)),s.xp6(3),s.hij("",t.content," "),s.xp6(2),s.Oqu(s.xi3(6,3,t.date,"short"))}}function V(t,e){if(1&t&&(s.TgZ(0,"div",12,13),s.YNc(2,X,7,8,"div",14),s.qZA()),2&t){const t=s.oxw();s.xp6(2),s.Q6J("ngForOf",t.chat.messages)}}function W(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"div",17),s.TgZ(1,"input",18),s.NdJ("keyup.enter",function(){return s.CHM(t),s.oxw().sendMessage()}),s.qZA(),s.TgZ(2,"button",19),s.NdJ("click",function(){return s.CHM(t),s.oxw().sendMessage()}),s.TgZ(3,"mat-icon"),s._uU(4,"send"),s.qZA(),s.qZA(),s.qZA()}if(2&t){const t=s.oxw();s.xp6(1),s.Q6J("formControl",t.messageControl)}}let D=(()=>{class t{constructor(t){this.messageService=t,this.messageControl=new i.NI("",[i.kI.required])}ngOnInit(){}ngAfterViewChecked(){this.updateScroll()}ngOnChanges(){this.chat&&this.messageService.getChatMessages(this.chat.id).then(t=>{this.chat.messages=t}).catch(t=>console.log(t))}sendMessage(){this.messageControl.valid&&(this.chat.messages.push({content:this.messageControl.value,date:new Date,id:"1234",isOwn:!0}),this.messageControl.reset(),this.updateScroll())}updateScroll(){try{this.myScrollContainer.nativeElement.scrollTop=this.myScrollContainer.nativeElement.scrollHeight}catch(t){}}clearMessages(){this.chat.messages=[]}deleteChat(){this.messageService.removeChat(this.chat.id),this.chat=null}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(x))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-chat"]],viewQuery:function(t,e){if(1&t&&s.Gf(R,5),2&t){let t;s.iGM(t=s.CRH())&&(e.myScrollContainer=t.first)}},inputs:{chat:"chat"},features:[s.TTD],decls:4,vars:3,consts:[[1,"container-all"],["color","primary",4,"ngIf"],["id","scrollMe","class","container-messages",4,"ngIf"],["class","container-input",4,"ngIf"],["color","primary"],[1,"info"],["alt","image",3,"src"],[1,"spacer"],["mat-icon-button","",3,"matMenuTriggerFor"],["menu","matMenu"],["disabled","","mat-menu-item","",3,"click"],["mat-menu-item","",3,"click"],["id","scrollMe",1,"container-messages"],["scrollMe",""],["class","container-message",3,"ngClass",4,"ngFor","ngForOf"],[1,"container-message",3,"ngClass"],[1,"message"],[1,"container-input"],["type","text","placeholder","Escribe un mensaje...","name","message",3,"formControl","keyup.enter"],["color","primary","mat-icon-button","",3,"click"]],template:function(t,e){1&t&&(s.TgZ(0,"div",0),s.YNc(1,$,21,3,"mat-toolbar",1),s.YNc(2,V,3,1,"div",2),s.YNc(3,W,5,1,"div",3),s.qZA()),2&t&&(s.xp6(1),s.Q6J("ngIf",e.chat),s.xp6(1),s.Q6J("ngIf",e.chat),s.xp6(1),s.Q6J("ngIf",e.chat))},directives:[o.O5,N.Ye,u.lW,B.p6,h.Hw,B.VK,B.OP,o.sg,o.mk,i.Fj,i.JJ,i.oH],pipes:[o.uU],styles:[".container-all[_ngcontent-%COMP%]{width:100%;background-color:#1d1d1d;flex-direction:column;justify-content:space-between;background-image:url(https://image.freepik.com/vector-gratis/doodle-inconsutil-social_1284-4665.jpg)}.container-all[_ngcontent-%COMP%], .info[_ngcontent-%COMP%]{height:100%;display:flex}.info[_ngcontent-%COMP%]{align-items:center}.info[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:100%;border:3px solid #fff;margin-right:10px}.spacer[_ngcontent-%COMP%]{flex:1 1 auto}.container-messages[_ngcontent-%COMP%]{width:100%;max-height:82.7%;background-color:rgba(0,0,0,.267);overflow-x:hidden;overflow-y:auto;height:100%}.container-messages[_ngcontent-%COMP%]   .container-message[_ngcontent-%COMP%]{padding:10px;display:flex}.container-messages[_ngcontent-%COMP%]   .container-message[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{padding:.5em;min-width:10%;max-width:50%;width:auto;border-radius:5px;display:flex;flex-direction:row}.container-messages[_ngcontent-%COMP%]   .container-message[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.container-messages[_ngcontent-%COMP%]   .container-message[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-align:right;font-size:10px;display:flex;align-items:flex-end;padding-top:20px;padding-left:5px}.send-message[_ngcontent-%COMP%]{justify-content:flex-end}.send-message[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{background-color:#fff;color:#1d1d1d}.message[_ngcontent-%COMP%]{background-color:#b37400;color:#fff}.container-input[_ngcontent-%COMP%]{background-color:#1d1d1d;padding-top:.5em;padding-bottom:.5em;max-height:7%;height:100%;width:100%;display:flex;justify-content:center;align-items:center}.container-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:50%;width:90%;border:none;border-radius:8px;padding:10px}.container-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border:none}[_ngcontent-%COMP%]::-webkit-scrollbar{width:10px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#888}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#555}"]}),t})();const K=[{path:"",component:Y,children:[{path:"",component:U},{path:"community",component:U},{path:"contacts",component:U},{path:"account",component:b},{path:"chat",component:(()=>{class t{constructor(t){this.messageService=t,this.destroy$=new O.xQ}ngOnInit(){this.subscribeChatChanges()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}subscribeChatChanges(){this.messageService.getChatObservable().pipe((0,L.R)(this.destroy$)).subscribe(t=>{this.selectedChat=t})}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(x))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-main-chat"]],decls:5,vars:1,consts:[[1,"container-all"],[1,"contacts"],[1,"chat"],[3,"chat"]],template:function(t,e){1&t&&(s.TgZ(0,"div",0),s.TgZ(1,"div",1),s._UZ(2,"app-contact-chat-list"),s.qZA(),s.TgZ(3,"div",2),s._UZ(4,"app-chat",3),s.qZA(),s.qZA()),2&t&&(s.xp6(4),s.Q6J("chat",e.selectedChat))},directives:[z,D],styles:[".container-all[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:row}.contacts[_ngcontent-%COMP%]{width:25%;height:100%}.chat[_ngcontent-%COMP%]{background-color:#bc8f8f;height:100%;width:100%}@media screen and (max-width:768px){.contacts[_ngcontent-%COMP%]{display:none}}"]}),t})()}]},{path:"***",pathMatch:"full",redirectTo:""}];let tt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[r.Bz.forChild(K)],r.Bz]}),t})(),et=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[o.ez,i.UX,tt,c.h,a.xu]]}),t})()}}]);