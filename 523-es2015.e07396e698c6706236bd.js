(self.webpackChunkfast_msg_fe=self.webpackChunkfast_msg_fe||[]).push([[523],{12523:function(t,n,e){"use strict";e.r(n),e.d(n,{MessagesModule:function(){return ct}});var o=e(61116),i=e(31041),a=e(68494),c=e(59571),r=e(17569),s=e(35366),l=e(76484);let g=(()=>{class t{constructor(t){this.localService=t}getProfile(){return new Promise((t,n)=>{t(this.localService.getUserProfile())})}updateProfile(t){return new Promise((n,e)=>{this.localService.updateProfile(t),n({})})}updatePassword(t){return new Promise((n,e)=>{this.localService.updatePassword(t),n({})})}}return t.\u0275fac=function(n){return new(n||t)(s.LFG(l.n))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var d=e(63589),u=e(22797),m=e(84369),p=e(24311),h=e(77307),f=e(13070),C=e(9550);function _(t,n){1&t&&(s.TgZ(0,"mat-error"),s._uU(1,"El correo el\xe9ctronico es requerido"),s.qZA())}function b(t,n){1&t&&(s.TgZ(0,"mat-error"),s._uU(1,"El correo el\xe9ctronico es inv\xe1lido"),s.qZA())}function M(t,n){1&t&&(s.TgZ(0,"button",15),s._uU(1,"Actualizar Perfil"),s.qZA())}function P(t,n){if(1&t){const t=s.EpF();s.TgZ(0,"form",6),s.NdJ("ngSubmit",function(){return s.CHM(t),s.oxw().submitPassword()}),s.TgZ(1,"h2"),s._uU(2,"Actualizar Contrase\xf1a"),s.qZA(),s.TgZ(3,"mat-form-field",9),s.TgZ(4,"mat-label"),s._uU(5,"Contrase\xf1a"),s.qZA(),s._UZ(6,"input",16),s.TgZ(7,"mat-error"),s._uU(8,"La contrase\xf1a es requerida"),s.qZA(),s.qZA(),s.TgZ(9,"mat-form-field",9),s.TgZ(10,"mat-label"),s._uU(11,"Nueva Contrase\xf1a"),s.qZA(),s._UZ(12,"input",17),s.TgZ(13,"mat-error"),s._uU(14,"La nueva contrase\xf1a es requerida"),s.qZA(),s.qZA(),s.TgZ(15,"button",15),s._uU(16,"Actualizar Contrase\xf1a"),s.qZA(),s.qZA()}if(2&t){const t=s.oxw();s.Q6J("formGroup",t.passwordForm)}}let Z=(()=>{class t{constructor(t,n,e){this.userService=t,this.formBuilder=n,this.matSnackBar=e,this.canUpdatePassword=!1,this.canUpdateProfile=!1,this.ProfileImage="",this.profileForm=this.formBuilder.group({name:["",i.kI.required],email:["",[i.kI.required,i.kI.email]]}),this.passwordForm=this.formBuilder.group({password:["",i.kI.required],newPassword:["",i.kI.required]})}ngOnInit(){this.userService.getProfile().then(t=>{this.profileForm.patchValue(t),this.ProfileImage=t.image}).catch(t=>console.log(t))}toggleUpdate(t){1==t?(this.canUpdateProfile=!this.canUpdateProfile,this.canUpdatePassword=!1):(this.canUpdatePassword=!this.canUpdatePassword,this.canUpdateProfile=!1)}submitProfile(){this.profileForm.valid&&(this.userService.updateProfile(this.profileForm.value).then(t=>{this.matSnackBar.open("Perfil Actualizado","Ok",{duration:2e3})}).catch(t=>console.log(t)),this.canUpdateProfile=!1)}submitPassword(){this.passwordForm.valid&&(this.userService.updatePassword(this.passwordForm.value).then(()=>{this.matSnackBar.open("Contrase\xf1a Actualizada","Ok",{duration:2e3})}).catch(t=>console.log(t)),this.canUpdatePassword=!1,this.passwordForm.reset())}}return t.\u0275fac=function(n){return new(n||t)(s.Y36(g),s.Y36(i.qu),s.Y36(d.ux))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-account"]],decls:34,vars:8,consts:[[1,"container-all"],[1,"content-profile"],[1,"options"],["mat-icon-button","","color","accent","matTooltip","Actualizar Perfil","matTooltipPosition","right",3,"click"],["mat-icon-button","","color","accent","matTooltip","Actualizar Contrase\xf1a","matTooltipPosition","right",3,"click"],[1,"container-form"],[3,"formGroup","ngSubmit"],[1,"image"],["alt","profile",3,"src"],["appearance","outline"],["type","text","matInput","","placeholder","Nombre","required","","formControlName","name",3,"readonly"],["type","email","matInput","","placeholder","email@email.com","required","","formControlName","email",3,"readonly"],[4,"ngIf"],["class","full-width","type","submit","mat-flat-button","","color","primary",4,"ngIf"],[3,"formGroup","ngSubmit",4,"ngIf"],["type","submit","mat-flat-button","","color","primary",1,"full-width"],["type","password","matInput","","placeholder","Contrase\xf1a","formControlName","password"],["type","password","matInput","","placeholder","Contrase\xf1a","formControlName","newPassword"]],template:function(t,n){1&t&&(s.TgZ(0,"div",0),s.TgZ(1,"mat-card"),s.TgZ(2,"mat-card-title"),s.TgZ(3,"h1"),s._uU(4,"Mi Cuenta"),s.qZA(),s.qZA(),s.TgZ(5,"mat-card-content"),s.TgZ(6,"div",1),s.TgZ(7,"div",2),s.TgZ(8,"button",3),s.NdJ("click",function(){return n.toggleUpdate(1)}),s.TgZ(9,"mat-icon"),s._uU(10,"drive_file_rename_outline"),s.qZA(),s.qZA(),s.TgZ(11,"button",4),s.NdJ("click",function(){return n.toggleUpdate(2)}),s.TgZ(12,"mat-icon"),s._uU(13,"vpn_key"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(14,"div",5),s.TgZ(15,"form",6),s.NdJ("ngSubmit",function(){return n.submitProfile()}),s.TgZ(16,"h2"),s._uU(17,"Mi Perfil"),s.qZA(),s.TgZ(18,"div",7),s._UZ(19,"img",8),s.qZA(),s.TgZ(20,"mat-form-field",9),s.TgZ(21,"mat-label"),s._uU(22,"Nombre"),s.qZA(),s._UZ(23,"input",10),s.TgZ(24,"mat-error"),s._uU(25,"El nombre es requerido"),s.qZA(),s.qZA(),s.TgZ(26,"mat-form-field",9),s.TgZ(27,"mat-label"),s._uU(28,"Correo el\xe9ctronico"),s.qZA(),s._UZ(29,"input",11),s.YNc(30,_,2,0,"mat-error",12),s.YNc(31,b,2,0,"mat-error",12),s.qZA(),s.YNc(32,M,2,0,"button",13),s.qZA(),s.YNc(33,P,17,1,"form",14),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&t&&(s.xp6(15),s.Q6J("formGroup",n.profileForm),s.xp6(4),s.Q6J("src",n.ProfileImage,s.LSH),s.xp6(4),s.Q6J("readonly",!n.canUpdateProfile),s.xp6(6),s.Q6J("readonly",!n.canUpdateProfile),s.xp6(1),s.Q6J("ngIf",n.profileForm.controls.email.touched&&n.profileForm.controls.email.hasError("required")),s.xp6(1),s.Q6J("ngIf",n.profileForm.controls.email.touched&&n.profileForm.controls.email.hasError("email")),s.xp6(1),s.Q6J("ngIf",n.canUpdateProfile),s.xp6(1),s.Q6J("ngIf",n.canUpdatePassword))},directives:[u.a8,u.n5,u.dn,m.lW,p.gM,h.Hw,i._Y,i.JL,i.sg,f.KE,f.hX,C.Nt,i.Fj,i.Q7,i.JJ,i.u,f.TO,o.O5],styles:[".container-all[_ngcontent-%COMP%]{width:100%;padding-top:2em;padding-bottom:2em}.container-all[_ngcontent-%COMP%], .image[_ngcontent-%COMP%]{display:flex;justify-content:center}.image[_ngcontent-%COMP%]{padding:.5em 0}.image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:100%;border:5px solid #ee9b00}.content-profile[_ngcontent-%COMP%]{display:flex}.content-profile[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]{border-right:1px solid rgba(0,0,0,.185);padding:.5em;margin:.5em;border-radius:3px;display:flex;flex-direction:column}mat-card[_ngcontent-%COMP%]{width:80%}mat-card[_ngcontent-%COMP%]   .container-form[_ngcontent-%COMP%], mat-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%}mat-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%;padding-bottom:5px}mat-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]{padding-top:.5em;padding-bottom:.5em}@media screen and (max-width:500px){.content-profile[_ngcontent-%COMP%]{flex-direction:column}.content-profile[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]{border-right:none;border-bottom:1px solid rgba(0,0,0,.185);flex-direction:row}}"]}),t})();var O=e(2999);let v=(()=>{class t{constructor(t,n){this.localService=t,this.randomService=n}getCommunity(){return new Promise((t,n)=>{t(this.randomService.getContacts(10))})}addContact(t){return new Promise((n,e)=>{this.localService.addContact(t),n({})})}removeContact(t){return new Promise((n,e)=>{this.localService.removeContact(t),n({})})}getContactsFromUser(){return new Promise((t,n)=>{t(this.localService.getContacts())})}getChatList(){return new Promise((t,n)=>{t(this.localService.getChatList().concat(this.randomService.getChatList(5)))})}getChat(t){return new Promise((t,n)=>{t(this.randomService.getChat())})}getChatMessages(t){return new Promise((t,n)=>{t(this.randomService.getRandomMessages(this.randomService.getRandomNumber()))})}createChat(t){if(!this.localService.getChatList().find(n=>n.contactId==t._id)){let n={id:this.randomService.getId(),title:t.name,image:t.image,contactId:t._id};this.localService.addChat(n)}}removeChat(t){return new Promise((n,e)=>{this.localService.removeChat(t),n({})})}}return t.\u0275fac=function(n){return new(n||t)(s.LFG(l.n),s.LFG(O.O))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function w(t,n){if(1&t&&(s.TgZ(0,"p"),s._uU(1),s.qZA()),2&t){const t=s.oxw().$implicit;s.xp6(1),s.Oqu(t.email)}}function x(t,n){if(1&t){const t=s.EpF();s.TgZ(0,"button",7),s.NdJ("click",function(){s.CHM(t);const n=s.oxw().$implicit;return s.oxw().addContact(n)}),s.TgZ(1,"mat-icon"),s._uU(2,"person_add"),s.qZA(),s.qZA()}}function T(t,n){if(1&t){const t=s.EpF();s.TgZ(0,"button",7),s.NdJ("click",function(){s.CHM(t);const n=s.oxw().$implicit;return s.oxw().removeContact(n._id)}),s.TgZ(1,"mat-icon"),s._uU(2,"person_remove"),s.qZA(),s.qZA()}}function q(t,n){if(1&t){const t=s.EpF();s.TgZ(0,"button",7),s.NdJ("click",function(){s.CHM(t);const n=s.oxw().$implicit;return s.oxw().createChat(n)}),s.TgZ(1,"mat-icon"),s._uU(2,"message"),s.qZA(),s.qZA()}}function A(t,n){if(1&t&&(s.TgZ(0,"mat-card",3),s._UZ(1,"img",4),s.TgZ(2,"h3"),s._uU(3),s.qZA(),s.YNc(4,w,2,1,"p",5),s.TgZ(5,"div"),s.YNc(6,x,3,0,"button",6),s.YNc(7,T,3,0,"button",6),s.YNc(8,q,3,0,"button",6),s.qZA(),s.qZA()),2&t){const t=n.$implicit,e=s.oxw();s.xp6(1),s.Q6J("src",t.image,s.LSH),s.xp6(2),s.Oqu(t.name),s.xp6(1),s.Q6J("ngIf",t.email),s.xp6(2),s.Q6J("ngIf",!e.isContacts),s.xp6(1),s.Q6J("ngIf",e.isContacts),s.xp6(1),s.Q6J("ngIf",e.isContacts)}}let k=(()=>{class t{constructor(t,n,e,o){this.snackBar=t,this.activatedRoute=n,this.contactService=e,this.router=o,this.contactList=[],this.isContacts=!1}ngOnInit(){(this.activatedRoute.snapshot.url.length>0?this.activatedRoute.snapshot.url[0].path:"community").includes("community")?(this.isContacts=!1,this.loadCommunity()):(this.isContacts=!0,this.getContactsFromUser())}loadCommunity(){this.contactService.getCommunity().then(t=>{this.contactList=t}).catch(t=>console.log(t))}addContact(t){this.contactService.addContact(t).then(t=>{this.snackBar.open("Contacto Agregado","Ok",{duration:3e3}),this.router.navigate(["user/contacts"])}).catch(t=>console.log(t))}removeContact(t){let n=this.contactList.findIndex(n=>n._id==t);n>-1&&this.contactList.splice(n,1),this.snackBar.open("Contacto Eliminado","Ok",{duration:3e3})}getContactsFromUser(){this.contactService.getContactsFromUser().then(t=>{this.contactList=t}).catch(t=>{this.contactList=[],console.log(t)})}createChat(t){this.contactService.createChat(t),this.router.navigate(["../chat"],{relativeTo:this.activatedRoute})}}return t.\u0275fac=function(n){return new(n||t)(s.Y36(d.ux),s.Y36(r.gz),s.Y36(v),s.Y36(r.F0))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-community"]],decls:5,vars:2,consts:[[1,"content"],[1,"grid"],["class","contact",4,"ngFor","ngForOf"],[1,"contact"],["alt","contact",3,"src"],[4,"ngIf"],["mat-icon-button","","color","primary",3,"click",4,"ngIf"],["mat-icon-button","","color","primary",3,"click"]],template:function(t,n){1&t&&(s.TgZ(0,"div",0),s.TgZ(1,"h1"),s._uU(2),s.qZA(),s.TgZ(3,"div",1),s.YNc(4,A,9,6,"mat-card",2),s.qZA(),s.qZA()),2&t&&(s.xp6(2),s.Oqu(n.isContacts?"Contactos":"Comunidad"),s.xp6(2),s.Q6J("ngForOf",n.contactList))},directives:[o.sg,u.a8,o.O5,m.lW,h.Hw],styles:[".content[_ngcontent-%COMP%]{padding:2em}.grid[_ngcontent-%COMP%]{display:grid;grid-gap:2em;grid-template-columns:repeat(5,1fr)}.grid[_ngcontent-%COMP%]   .contact[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-direction:column;align-items:center}.grid[_ngcontent-%COMP%]   .contact[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-weight:700}.grid[_ngcontent-%COMP%]   .contact[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{overflow-wrap:break-word}.grid[_ngcontent-%COMP%]   .contact[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50%;border-radius:100%;border:5px solid #ee9b00}@media screen and (max-width:1335px){.grid[_ngcontent-%COMP%]{grid-template-columns:repeat(4,1fr)}}@media screen and (max-width:1006px){.grid[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}@media screen and (max-width:883px){.grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media screen and (max-width:610px){.grid[_ngcontent-%COMP%]{display:flex;flex-direction:column}}"]}),t})();const y=[{title:"Comunidad",icon:"public",route:"./community"},{title:"Contactos",icon:"contacts",route:"./contacts"},{title:"Chats",icon:"chat",route:"./chat"},{title:"Cuenta",icon:"settings",route:"./account"}];var U=e(42590),S=e(55959);let J=(()=>{class t{constructor(){this.subjectChat=new S.xQ,this.subjectMenu=new S.xQ}changeChat(t){this.subjectChat.next(t)}hideMenu(){this.subjectMenu.next(!1)}showMenu(){this.subjectMenu.next(!0)}getChatObservable(){return this.subjectChat.asObservable()}getMenuObservable(){return this.subjectMenu.asObservable()}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var I=e(10168),F=e(87064),N=e(37112);const Y=["sidenav"];function Q(t,n){if(1&t){const t=s.EpF();s.TgZ(0,"mat-toolbar",8),s.TgZ(1,"button",9),s.NdJ("click",function(){return s.CHM(t),s.oxw(),s.MAs(3).toggle()}),s.TgZ(2,"mat-icon"),s._uU(3,"menu"),s.qZA(),s.qZA(),s.qZA()}}function H(t,n){if(1&t){const t=s.EpF();s.TgZ(0,"div",10),s.NdJ("click",function(){return s.CHM(t),s.oxw().selectRoute()}),s.TgZ(1,"button",7),s.TgZ(2,"mat-icon",8),s._uU(3),s.qZA(),s.qZA(),s.TgZ(4,"span"),s._uU(5),s.qZA(),s.qZA()}if(2&t){const t=n.$implicit;s.Q6J("routerLink",t.route)("matTooltip",t.title),s.xp6(3),s.Oqu(t.icon),s.xp6(2),s.Oqu(t.title)}}let L=(()=>{class t{constructor(t,n,e,o){this.authService=t,this.router=n,this.breakpointObserver=e,this.utilservice=o,this.showToolbar=!0,this.options=y}ngOnInit(){this.utilservice.getMenuObservable().subscribe(t=>{this.showToolbar=t})}ngAfterViewInit(){setTimeout(()=>{this.breakpointObserver.observe(["(max-width: 550px)"]).subscribe(t=>{t.matches?(this.sidenav.close(),this.sidenav.mode="over"):(this.sidenav.open(),this.sidenav.mode="side")})},200)}selectRoute(){"over"==this.sidenav.mode&&this.sidenav.close()}logout(){this.selectRoute(),this.authService.logout(),this.router.navigate([""])}}return t.\u0275fac=function(n){return new(n||t)(s.Y36(U.e),s.Y36(r.F0),s.Y36(a.Yg),s.Y36(J))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-home"]],viewQuery:function(t,n){if(1&t&&s.Gf(Y,5),2&t){let t;s.iGM(t=s.CRH())&&(n.sidenav=t.first)}},decls:13,vars:2,consts:[[1,"sidenav-container",3,"backdropClick"],["color","primary",4,"ngIf"],["mode","side","opened","false",1,"sidenav",3,"keydown.escape"],["sidenav",""],[1,"options"],["class","option","matTooltipPosition","right",3,"routerLink","matTooltip","click",4,"ngFor","ngForOf"],["matTooltip","Salir","matTooltipPosition","right",1,"option",3,"click"],["matRipple",""],["color","primary"],["mat-icon-button","","aria-label","icon-button with menu icon",3,"click"],["matTooltipPosition","right",1,"option",3,"routerLink","matTooltip","click"]],template:function(t,n){if(1&t){const t=s.EpF();s.TgZ(0,"mat-sidenav-container",0),s.NdJ("backdropClick",function(){return s.CHM(t),s.MAs(3).toggle()}),s.YNc(1,Q,4,0,"mat-toolbar",1),s.TgZ(2,"mat-sidenav",2,3),s.NdJ("keydown.escape",function(){return s.CHM(t),s.MAs(3).toggle()}),s.TgZ(4,"div",4),s.YNc(5,H,6,4,"div",5),s.TgZ(6,"div",6),s.NdJ("click",function(){return n.logout()}),s.TgZ(7,"button",7),s.TgZ(8,"mat-icon",8),s._uU(9,"door_front"),s.qZA(),s.qZA(),s.TgZ(10,"span"),s._uU(11,"Salir"),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s._UZ(12,"router-outlet"),s.qZA()}2&t&&(s.xp6(1),s.Q6J("ngIf",n.showToolbar),s.xp6(4),s.Q6J("ngForOf",n.options))},directives:[I.TM,o.O5,I.JX,o.sg,p.gM,F.wG,h.Hw,r.lC,N.Ye,m.lW,r.rH],styles:['.sidenav-container[_ngcontent-%COMP%]{min-height:100vh;height:100%;background-color:#2f2f2f;background-image:url(square_bg.821beea2422a29d3137a.png);color:#fff}mat-toolbar[_ngcontent-%COMP%]{display:none}.sidenav[_ngcontent-%COMP%]{background-color:#2f2f2f;height:100%;width:auto}.sidenav-content[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:row;flex-wrap:nowrap}.options[_ngcontent-%COMP%]{width:auto}.options[_ngcontent-%COMP%]   .option[_ngcontent-%COMP%]{padding:.5em;display:flex;align-items:center}.options[_ngcontent-%COMP%]   .option[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:none;color:#fff;font-family:Oswald,"sans-serif";letter-spacing:1px}.options[_ngcontent-%COMP%]   .option[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:100%;box-shadow:none;border:none;display:flex;justify-content:center;align-items:center;padding:1em;background-color:transparent}.options[_ngcontent-%COMP%]   .option[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:40px;width:40px;height:40px}.options[_ngcontent-%COMP%]   .option[_ngcontent-%COMP%]:hover{cursor:pointer}.options[_ngcontent-%COMP%]   .option[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]{color:#ee9b00}.options[_ngcontent-%COMP%]   .option[_ngcontent-%COMP%]:hover   button[_ngcontent-%COMP%]{cursor:pointer}.options[_ngcontent-%COMP%]   .option[_ngcontent-%COMP%]:hover   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#fff}.container-all[_ngcontent-%COMP%], .content-menu[_ngcontent-%COMP%]{background-color:transparent}.container-all[_ngcontent-%COMP%]{width:100%;height:100%}.menu[_ngcontent-%COMP%]{background-color:transparent}.top-menu[_ngcontent-%COMP%]{background-color:#fff}@media screen and (max-width:550px){mat-toolbar[_ngcontent-%COMP%]{display:flex;align-items:center}.options[_ngcontent-%COMP%]   .option[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block}.sidenav[_ngcontent-%COMP%]{padding-left:1em;padding-right:1em}}']}),t})();var j=e(25416),E=e(90667);function z(t,n){if(1&t&&(s.TgZ(0,"div",8),s._uU(1),s.qZA()),2&t){const t=s.oxw().$implicit;s.xp6(1),s.hij(" ",t.lastMessage," ")}}function B(t,n){if(1&t&&(s.TgZ(0,"mat-list-option",4),s._UZ(1,"img",5),s.TgZ(2,"div",6),s._uU(3),s.qZA(),s.YNc(4,z,2,1,"div",7),s.qZA()),2&t){const t=n.$implicit;s.Q6J("value",t.id),s.xp6(1),s.Q6J("src",t.image,s.LSH),s.xp6(2),s.Oqu(t.title),s.xp6(1),s.Q6J("ngIf",t.lastMessage)}}let R=(()=>{class t{constructor(t,n){this.messageService=t,this.utilService=n,this.chatList=[]}ngOnInit(){}ngAfterViewInit(){this.loadList()}loadList(){this.messageService.getChatList().then(t=>{this.chatList=t}).catch(t=>console.log(t))}selectChat(t){const n=t.options[0].value;let e=this.chatList.find(t=>t.id==n);e&&this.utilService.changeChat(e)}}return t.\u0275fac=function(n){return new(n||t)(s.Y36(v),s.Y36(J))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-contact-chat-list"]],decls:5,vars:2,consts:[[1,"container-list"],[3,"multiple","selectionChange"],["mat-subheader",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["mat-list-icon","","alt","image",3,"src"],["mat-line","",1,"name"],["mat-line","","class","message",4,"ngIf"],["mat-line","",1,"message"]],template:function(t,n){1&t&&(s.TgZ(0,"div",0),s.TgZ(1,"mat-selection-list",1),s.NdJ("selectionChange",function(t){return n.selectChat(t)}),s.TgZ(2,"div",2),s._uU(3,"Conversaciones"),s.qZA(),s.YNc(4,B,5,4,"mat-list-option",3),s.qZA(),s.qZA()),2&t&&(s.xp6(1),s.Q6J("multiple",!1),s.xp6(3),s.Q6J("ngForOf",n.chatList))},directives:[E.Ub,E.gs,o.sg,E.vS,E.Nh,F.X2,o.O5],styles:[".container-list[_ngcontent-%COMP%]{width:100%;height:100%;overflow-y:auto;overflow-x:hidden;background-color:#2f2f2f}.mat-list-base[_ngcontent-%COMP%]   .mat-list-option[_ngcontent-%COMP%], .mat-list-base[_ngcontent-%COMP%]   .mat-subheader[_ngcontent-%COMP%]{color:#f3f3f3}.mat-list-base[_ngcontent-%COMP%]   .mat-subheader[_ngcontent-%COMP%]{font-family:Oswald,sans-serif;letter-spacing:1px}.name[_ngcontent-%COMP%]{font-weight:400!important}.message[_ngcontent-%COMP%]{font-weight:lighter!important}.mat-list-base[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]   .mat-list-icon[_ngcontent-%COMP%], .mat-list-base[_ngcontent-%COMP%]   .mat-list-option[_ngcontent-%COMP%]   .mat-list-icon[_ngcontent-%COMP%]{width:40px;height:40px}.mat-list-single-selected-option[_ngcontent-%COMP%]   .mat-list-icon[_ngcontent-%COMP%]{border:3px solid #ee9b00;padding:0}[_ngcontent-%COMP%]::-webkit-scrollbar{width:10px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#888}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#555}"]}),t})();var $=e(20400);const G=["scrollMe"];function X(t,n){if(1&t){const t=s.EpF();s.TgZ(0,"mat-toolbar",4),s.TgZ(1,"div",5),s.TgZ(2,"button",6),s.NdJ("click",function(){return s.CHM(t),s.oxw().backContacts.emit()}),s.TgZ(3,"mat-icon"),s._uU(4,"arrow_back_ios_new"),s.qZA(),s.qZA(),s._UZ(5,"img",7),s.TgZ(6,"div"),s._uU(7),s.qZA(),s.qZA(),s._UZ(8,"span",8),s.TgZ(9,"button",9),s.TgZ(10,"mat-icon"),s._uU(11,"more_vert"),s.qZA(),s.qZA(),s.TgZ(12,"mat-menu",null,10),s.TgZ(14,"button",11),s.NdJ("click",function(){return s.CHM(t),s.oxw().deleteChat()}),s.TgZ(15,"mat-icon"),s._uU(16,"delete_outline"),s.qZA(),s.TgZ(17,"span"),s._uU(18,"Eliminar Conversaci\xf3n"),s.qZA(),s.qZA(),s.TgZ(19,"button",12),s.NdJ("click",function(){return s.CHM(t),s.oxw().clearMessages()}),s.TgZ(20,"mat-icon"),s._uU(21,"clear_all"),s.qZA(),s.TgZ(22,"span"),s._uU(23,"Eliminar Mensajes"),s.qZA(),s.qZA(),s.qZA(),s.qZA()}if(2&t){const t=s.MAs(13),n=s.oxw();s.xp6(5),s.Q6J("src",n.chat.image,s.LSH),s.xp6(2),s.Oqu(n.chat.title),s.xp6(2),s.Q6J("matMenuTriggerFor",t)}}const V=function(t){return{"send-message":t}};function W(t,n){if(1&t&&(s.TgZ(0,"div",16),s.TgZ(1,"div",17),s.TgZ(2,"p"),s._uU(3),s.qZA(),s.TgZ(4,"span"),s._uU(5),s.ALo(6,"date"),s.qZA(),s.qZA(),s.qZA()),2&t){const t=n.$implicit;s.Q6J("ngClass",s.VKq(6,V,t.isOwn)),s.xp6(3),s.hij("",t.content," "),s.xp6(2),s.Oqu(s.xi3(6,3,t.date,"short"))}}function D(t,n){if(1&t&&(s.TgZ(0,"div",13,14),s.YNc(2,W,7,8,"div",15),s.qZA()),2&t){const t=s.oxw();s.xp6(2),s.Q6J("ngForOf",t.chat.messages)}}function K(t,n){if(1&t){const t=s.EpF();s.TgZ(0,"div",18),s.TgZ(1,"input",19),s.NdJ("keyup.enter",function(){return s.CHM(t),s.oxw().sendMessage()}),s.qZA(),s.TgZ(2,"button",20),s.NdJ("click",function(){return s.CHM(t),s.oxw().sendMessage()}),s.TgZ(3,"mat-icon"),s._uU(4,"send"),s.qZA(),s.qZA(),s.qZA()}if(2&t){const t=s.oxw();s.xp6(1),s.Q6J("formControl",t.messageControl)}}let tt=(()=>{class t{constructor(t){this.messageService=t,this.backContacts=new s.vpe,this.messageControl=new i.NI("",[i.kI.required])}ngOnInit(){}ngAfterViewChecked(){this.updateScroll()}ngOnChanges(){this.chat&&this.messageService.getChatMessages(this.chat.id).then(t=>{this.chat.messages=t}).catch(t=>console.log(t))}sendMessage(){this.messageControl.valid&&(this.chat.messages.push({content:this.messageControl.value,date:new Date,id:"1234",isOwn:!0}),this.messageControl.reset(),this.updateScroll())}updateScroll(){try{this.myScrollContainer.nativeElement.scrollTop=this.myScrollContainer.nativeElement.scrollHeight}catch(t){}}clearMessages(){this.chat.messages=[]}deleteChat(){this.messageService.removeChat(this.chat.id),this.chat=null}}return t.\u0275fac=function(n){return new(n||t)(s.Y36(v))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-chat"]],viewQuery:function(t,n){if(1&t&&s.Gf(G,5),2&t){let t;s.iGM(t=s.CRH())&&(n.myScrollContainer=t.first)}},inputs:{chat:"chat"},outputs:{backContacts:"backContacts"},features:[s.TTD],decls:4,vars:3,consts:[[1,"container-all"],["color","primary",4,"ngIf"],["id","scrollMe","class","container-messages",4,"ngIf"],["class","container-input",4,"ngIf"],["color","primary"],[1,"info"],["mat-icon-button","",1,"arrow-btn",3,"click"],["alt","image",3,"src"],[1,"spacer"],["mat-icon-button","",3,"matMenuTriggerFor"],["menu","matMenu"],["disabled","","mat-menu-item","",3,"click"],["mat-menu-item","",3,"click"],["id","scrollMe",1,"container-messages"],["scrollMe",""],["class","container-message",3,"ngClass",4,"ngFor","ngForOf"],[1,"container-message",3,"ngClass"],[1,"message"],[1,"container-input"],["type","text","placeholder","Escribe un mensaje...","name","message",3,"formControl","keyup.enter"],["color","primary","mat-icon-button","",3,"click"]],template:function(t,n){1&t&&(s.TgZ(0,"div",0),s.YNc(1,X,24,3,"mat-toolbar",1),s.YNc(2,D,3,1,"div",2),s.YNc(3,K,5,1,"div",3),s.qZA()),2&t&&(s.xp6(1),s.Q6J("ngIf",n.chat),s.xp6(1),s.Q6J("ngIf",n.chat),s.xp6(1),s.Q6J("ngIf",n.chat))},directives:[o.O5,N.Ye,m.lW,h.Hw,$.p6,$.VK,$.OP,o.sg,o.mk,i.Fj,i.JJ,i.oH],pipes:[o.uU],styles:[".container-all[_ngcontent-%COMP%]{width:100%;height:100%;background-color:#1d1d1d;display:flex;flex-direction:column;justify-content:space-between;background-image:url(https://image.freepik.com/vector-gratis/doodle-inconsutil-social_1284-4665.jpg)}mat-toolbar[_ngcontent-%COMP%]{padding:16px 10px}.arrow-btn[_ngcontent-%COMP%]{margin-right:5px;display:none}.info[_ngcontent-%COMP%]{display:flex;height:100%;align-items:center}.info[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:100%;border:3px solid #fff;margin-right:10px}.spacer[_ngcontent-%COMP%]{flex:1 1 auto}.container-messages[_ngcontent-%COMP%]{width:100%;background-color:rgba(0,0,0,.267);overflow-x:hidden;overflow-y:auto;height:100%}.container-messages[_ngcontent-%COMP%]   .container-message[_ngcontent-%COMP%]{padding:10px;display:flex}.container-messages[_ngcontent-%COMP%]   .container-message[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{padding:.5em;min-width:10%;max-width:50%;width:auto;border-radius:5px;display:flex;flex-direction:row}.container-messages[_ngcontent-%COMP%]   .container-message[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.container-messages[_ngcontent-%COMP%]   .container-message[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-align:right;font-size:10px;display:flex;align-items:flex-end;padding-top:20px;padding-left:5px}.send-message[_ngcontent-%COMP%]{justify-content:flex-end}.send-message[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{background-color:#fff;color:#1d1d1d}.message[_ngcontent-%COMP%]{background-color:#b37400;color:#fff}.container-input[_ngcontent-%COMP%]{background-color:#1d1d1d;padding:.5em;max-height:7%;height:100%;width:100%;display:flex;justify-content:center;align-items:center}.container-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:50%;width:90%;border:none;border-radius:8px;padding:10px}.container-input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:12px}.container-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border:none}@media screen and (max-width:768px){.arrow-btn[_ngcontent-%COMP%]{display:block}}[_ngcontent-%COMP%]::-webkit-scrollbar{width:10px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#888}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#555}"]}),t})();function nt(t,n){1&t&&(s.TgZ(0,"div",4),s._UZ(1,"app-contact-chat-list"),s.qZA())}function et(t,n){if(1&t){const t=s.EpF();s.TgZ(0,"div",5),s.TgZ(1,"app-chat",6),s.NdJ("backContacts",function(){return s.CHM(t),s.oxw().clearSelectedChat()}),s.qZA(),s.qZA()}if(2&t){const t=s.oxw();s.xp6(1),s.Q6J("chat",t.selectedChat)}}function ot(t,n){1&t&&(s.TgZ(0,"div",7),s._UZ(1,"img",8),s.qZA())}const it=[{path:"",component:L,children:[{path:"",component:k},{path:"community",component:k},{path:"contacts",component:k},{path:"account",component:Z},{path:"chat",component:(()=>{class t{constructor(t,n){this.breakpointObserver=t,this.utilService=n,this.showContacts=!0,this.canShowHideMenu=!1,this.destroy$=new S.xQ}ngOnInit(){this.subscribeChatChanges()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}ngAfterViewInit(){setTimeout(()=>{this.breakpointObserver.observe(["(max-width: 768px)","(max-width: 550px)"]).subscribe(t=>{if(!t.matches)return this.canShowHideMenu=!1,void(this.showContacts=!0);this.showContacts=!t.breakpoints["(max-width: 768px)"],t.breakpoints["(max-width: 550px)"]?(this.canShowHideMenu=!0,this.selectedChat&&this.utilService.hideMenu()):this.canShowHideMenu=!1})},200)}subscribeChatChanges(){this.utilService.getChatObservable().pipe((0,j.R)(this.destroy$)).subscribe(t=>{this.selectedChat=t,this.selectedChat&&this.canShowHideMenu&&this.utilService.hideMenu()})}canShowContact(){return!!this.showContacts||null==this.selectedChat}canShowPreview(){return!!this.showContacts&&null==this.selectedChat}clearSelectedChat(){this.selectedChat=null,this.canShowHideMenu&&this.utilService.showMenu()}}return t.\u0275fac=function(n){return new(n||t)(s.Y36(a.Yg),s.Y36(J))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-main-chat"]],decls:4,vars:3,consts:[[1,"container-all"],["class","contacts",4,"ngIf"],["class","chat",4,"ngIf"],["class","chat-preview",4,"ngIf"],[1,"contacts"],[1,"chat"],[3,"chat","backContacts"],[1,"chat-preview"],["src","assets/img/icons/logo-fastmessage.svg","alt","Fast Messsage"]],template:function(t,n){1&t&&(s.TgZ(0,"div",0),s.YNc(1,nt,2,0,"div",1),s.YNc(2,et,2,1,"div",2),s.YNc(3,ot,2,0,"div",3),s.qZA()),2&t&&(s.xp6(1),s.Q6J("ngIf",n.canShowContact()),s.xp6(1),s.Q6J("ngIf",null!=n.selectedChat),s.xp6(1),s.Q6J("ngIf",n.canShowPreview()))},directives:[o.O5,R,tt],styles:[".container-all[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:row}.contacts[_ngcontent-%COMP%]{width:25%;height:100%}.chat[_ngcontent-%COMP%]{background-color:#2f2f2f}.chat[_ngcontent-%COMP%], .chat-preview[_ngcontent-%COMP%]{height:100%;width:100%}.chat-preview[_ngcontent-%COMP%]{background-color:#1d1d1d;background-image:url(square_bg.821beea2422a29d3137a.png);display:flex;justify-content:center;align-items:center}.chat-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30%}@media screen and (max-width:768px){.container-all[_ngcontent-%COMP%]{flex-direction:column;height:100%}.contacts[_ngcontent-%COMP%]{width:100%;height:100%}}"]}),t})()}]},{path:"***",pathMatch:"full",redirectTo:""}];let at=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[r.Bz.forChild(it)],r.Bz]}),t})(),ct=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[o.ez,i.UX,at,c.h,a.xu]]}),t})()}}]);